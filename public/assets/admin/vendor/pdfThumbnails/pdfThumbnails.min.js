var createPDFThumbnails=function(){var t=null,e=!1,a=Array.prototype.slice.call(document.querySelectorAll("img[data-pdf-thumbnail-file]"));if(a.length){if(e||"undefined"!=typeof pdfjsLib)r();else{var n=document.querySelector("script[data-pdfjs-src]").getAttribute("data-pdfjs-src");if(!n)throw Error('PDF.js URL not set in "data-pdfjs-src" attribute: cannot load PDF.js');var o=document.createElement("script");o.src=n,document.head.appendChild(o).onload=r,e=!0}}function r(){if(!pdfjsLib)throw Error("pdf.js failed to load. Check data-pdfjs-src attribute.");a.forEach(function(e){null===t&&(t=new pdfjsLib.PDFWorker);var a=e.getAttribute("data-pdf-thumbnail-file"),n=e.getAttribute("data-pdf-thumbnail-width"),o=e.getAttribute("data-pdf-thumbnail-height");pdfjsLib.getDocument({url:a,worker:t}).promise.then(function(t){t.getPage(1).then(function(t){var a=document.createElement("canvas"),r=t.getViewport({scale:1}),i=a.getContext("2d");n?r=t.getViewport({scale:n/r.width}):o&&(r=t.getViewport({scale:o/r.height})),a.height=r.height,a.width=r.width,t.render({canvasContext:i,viewport:r}).promise.then(function(){e.src=a.toDataURL()})}).catch(function(){console.log("pdfThumbnails error: could not open page 1 of document "+a+". Not a pdf ?")})}).catch(function(){console.log("pdfThumbnails error: could not find or open document "+a+". Not a pdf ?")})})}};"complete"!==document.readyState&&("loading"===document.readyState||document.documentElement.doScroll)?document.addEventListener("DOMContentLoaded",createPDFThumbnails):createPDFThumbnails();